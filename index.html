<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Halo Notes</title>
  <meta name="description" content="Halo Notes - ç»“æ„åŒ–æ–‡ç« å½’æ¡£" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <script>
    (function(){
      const saved=localStorage.getItem('halo_theme');
      let theme=saved;
      if(!theme){
        const h=new Date().getHours();
        theme=(h>=7 && h<19)?'light':'dark';
      }
      document.documentElement.setAttribute('data-theme',theme);
    })();
  </script>
  <style>
    :root{--bg:#0b0d10;--panel:#12161c;--panel2:#171c24;--text:#f3f5f8;--muted:#98a2b3;--line:#293241;--a:#7dd3fc;--g:#22c55e;--heroGlow:#1f293733;--inputBg:#0f1318;--inputBorder:#293241;--inputText:#f3f5f8;--inputPlaceholder:#7b8797;--chipBg:#0b0d10cc;--chipText:#cbd5e1;--chipBorder:#ffffff22;--filterBg:#141922;--tagBg:rgba(148,163,184,.06)}
    [data-theme="light"]{--bg:#f5f7fb;--panel:#ffffff;--panel2:#f8fafc;--text:#0f172a;--muted:#64748b;--line:#dbe3ef;--a:#0369a1;--g:#16a34a;--heroGlow:#bae6fd66;--inputBg:#ffffff;--inputBorder:#cfd9e8;--inputText:#0f172a;--inputPlaceholder:#94a3b8;--chipBg:#f8fafc;--chipText:#334155;--chipBorder:#cfd9e8;--filterBg:#ffffff;--tagBg:#f8fafc}
    *{box-sizing:border-box}
    html,body{margin:0;background:radial-gradient(1000px 500px at 20% -10%,var(--heroGlow),transparent 55%),var(--bg);color:var(--text);font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft Yahei",sans-serif}
    .mono{font-family:"JetBrains Mono",ui-monospace,monospace}
    .wrap{max-width:1060px;margin:0 auto;padding:26px 14px 58px}
    .hero{background:linear-gradient(180deg,var(--heroGlow),transparent 60%),var(--panel);border:1px solid var(--line);border-radius:16px;padding:20px 16px}
    .heroTop{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .k{display:inline-flex;padding:3px 9px;border:1px solid #22c55e66;color:#86efac;border-radius:999px;font-size:12px}
    .themeBtn{border:1px solid var(--line);background:var(--panel2);color:var(--muted);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer}
    h1{margin:10px 0 4px;font-size:30px;letter-spacing:-.02em}
    .sub{margin:0;color:var(--muted)}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
    .search{flex:1;min-width:220px;padding:11px 12px;border-radius:10px;border:1px solid var(--inputBorder);background:var(--inputBg);color:var(--inputText)}
    .search::placeholder{color:var(--inputPlaceholder)}
    .search:focus{outline:none;border-color:#7dd3fc66}
    .pill{padding:10px 12px;border:1px solid var(--inputBorder);border-radius:10px;color:var(--inputText);font-size:13px;background:var(--inputBg);font-weight:600}
    .filters{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .filter{border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:var(--filterBg);color:var(--muted);font-size:12px;cursor:pointer}
    .filter.active{border-color:#7dd3fc66;color:#bae6fd}
    .st{margin:18px 2px 10px;color:var(--muted);font-size:14px}
    .topBlocks{display:grid;grid-template-columns:1.2fr .8fr;gap:12px;margin:14px 0}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
    .pTitle{font-size:12px;color:var(--muted);margin-bottom:8px}
    .featTitle{font-size:20px;line-height:1.35;font-weight:700;color:var(--text);text-decoration:none;display:block}
    .featSum{margin-top:8px;color:#9fb0c4;font-size:14px;line-height:1.6}
    .miniList{display:flex;flex-direction:column;gap:8px}
    .miniItem a{color:var(--text);text-decoration:none;font-weight:600}
    .miniMeta{font-size:12px;color:var(--muted)}
    @media (max-width:900px){.topBlocks{grid-template-columns:1fr}}
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden;transition:.18s ease}
    .card:hover{transform:translateY(-1px);background:var(--panel2);border-color:#7dd3fc55}
    .cover{position:relative;display:block;aspect-ratio:2/1;background:linear-gradient(120deg,#0ea5e933,#22c55e33),linear-gradient(180deg,#1f2937,#111827);transition:transform .25s ease, filter .25s ease}
    .card:hover .cover{transform:scale(1.02);filter:saturate(1.08)}
    .cover.cat-openclaw{background:linear-gradient(120deg,#0ea5e944,#22c55e44),linear-gradient(180deg,#123040,#0f172a)}
    .cover.cat-tools{background:linear-gradient(120deg,#2563eb44,#06b6d444),linear-gradient(180deg,#1e293b,#111827)}
    .cover.cat-workflow{background:linear-gradient(120deg,#7c3aed44,#0ea5e944),linear-gradient(180deg,#1f2240,#0f172a)}
    .cover.cat-default{background:linear-gradient(120deg,#33415555,#0ea5e933),linear-gradient(180deg,#1f2937,#111827)}
    .cover::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.35));}
    .metaTop{position:absolute;left:8px;top:8px;display:flex;gap:6px;z-index:2}
    .chip{font-size:11px;padding:2px 8px;border-radius:999px;background:var(--chipBg);border:1px solid var(--chipBorder);color:var(--chipText)}
    .q-S{color:#86efac;border-color:#22c55e66}.q-A{color:#bae6fd;border-color:#38bdf866}.q-B{color:#fda4af;border-color:#fb718566}
    .body{padding:13px 13px 12px}
    .tt{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-size:19px;line-height:1.34;font-weight:700;color:var(--text);text-decoration:none;min-height:52px}
    .sm{margin-top:8px;color:#9fb0c4;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;min-height:66px;font-size:14px;line-height:1.58}
    .m2{margin-top:11px;color:var(--muted);font-size:12px;display:flex;gap:6px;flex-wrap:wrap;align-items:center;padding-top:8px;border-top:1px dashed var(--line)}
    .m2 a{color:var(--a);text-decoration:none}
    .tags{margin-top:9px;display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:11px;border:1px solid var(--line);border-radius:999px;padding:2px 8px;color:var(--muted);background:var(--tagBg)}
    .skeleton{height:252px;border-radius:14px;background:linear-gradient(90deg,#141922 25%,#1a2230 37%,#141922 63%);background-size:400% 100%;animation:sh 1.4s ease infinite;border:1px solid var(--line)}
    @keyframes sh{0%{background-position:100% 50%}100%{background-position:0 50%}}
    .empty{padding:24px 0;text-align:center;color:var(--muted)}
    .emptyBtn{margin-top:8px;border:1px solid var(--line);background:var(--panel2);color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer;font-size:12px}
    footer{margin-top:18px;color:#64748b;font-size:12px}
    @media (max-width:640px){.wrap{padding:12px 10px 34px}h1{font-size:24px}.search{font-size:16px}.pill{width:100%;text-align:center}}
  </style>
</head>
<body>
  <main class="wrap">
    <section class="hero">
      <div class="heroTop">
        <span class="k mono">HALO NOTES / CARD v2</span>
        <button id="themeToggle" class="themeBtn mono" type="button">ğŸŒ™ å¤œé—´</button>
      </div>
      <h1>ç»“æ„åŒ–æ–‡ç« å½’æ¡£</h1>
      <p class="sub">å‚è€ƒ Paragraph çš„å¡ç‰‡èŠ‚å¥ï¼šå°é¢ â†’ æ ‡é¢˜ â†’ æ‘˜è¦ â†’ å…ƒä¿¡æ¯</p>
      <div class="toolbar">
        <input id="q" class="search" placeholder="æœç´¢æ ‡é¢˜/æ‘˜è¦/æ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼šOpenClawã€Agentï¼‰" />
        <span id="count" class="pill mono">0 / 0</span>
      </div>
      <div id="filters" class="filters"></div>
    </section>


    <section class="topBlocks">
      <article class="panel" id="featuredPanel">
        <div class="pTitle mono">FEATURED</div>
        <a id="featuredTitle" class="featTitle" href="#">åŠ è½½ä¸­â€¦</a>
        <div id="featuredSummary" class="featSum"></div>
      </article>
      <aside class="panel">
        <div class="pTitle mono">RECENT UPDATES</div>
        <div id="recentList" class="miniList"></div>
      </aside>
    </section>

    <p class="st mono">ARTICLES Â· å·²æŒ‰æ—¶é—´å€’åºæ’åˆ—</p>
    <section id="list" class="grid"></section>
    <div id="empty" class="empty" style="display:none">æ²¡æœ‰åŒ¹é…ç»“æœï¼Œæ¢ä¸ªå…³é”®è¯è¯•è¯•ã€‚<div><button id="clearBtn" class="emptyBtn">æ¸…ç©ºç­›é€‰</button></div></div>
    <footer class="mono">Powered by GitHub Pages Â· Managed by Halo</footer>
  </main>

  <script>
    const state={items:[],q:'',category:'å…¨éƒ¨'};
    const list=document.getElementById('list');
    const countEl=document.getElementById('count');
    const empty=document.getElementById('empty');
    const qInput=document.getElementById('q');
    const filters=document.getElementById('filters');
    const themeToggle=document.getElementById('themeToggle');
    const clearBtn=document.getElementById('clearBtn');
    const featuredTitle=document.getElementById('featuredTitle');
    const featuredSummary=document.getElementById('featuredSummary');
    const recentList=document.getElementById('recentList');

    function syncThemeBtn(){
      const t=document.documentElement.getAttribute('data-theme')||'dark';
      themeToggle.textContent = t==='light' ? 'â˜€ï¸ æ—¥é—´' : 'ğŸŒ™ å¤œé—´';
    }
    themeToggle.addEventListener('click',()=>{
      const now=document.documentElement.getAttribute('data-theme')||'dark';
      const next= now==='light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme',next);
      localStorage.setItem('halo_theme',next);
      syncThemeBtn();
    });
    syncThemeBtn();

    list.innerHTML='<div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>';

    function renderFilters(){
      const cats=['å…¨éƒ¨',...new Set(state.items.map(i=>i.category||'æœªåˆ†ç±»'))];
      filters.innerHTML='';
      cats.forEach(c=>{
        const b=document.createElement('button');
        b.className='filter'+(state.category===c?' active':'');
        b.textContent=c;
        b.onclick=()=>{state.category=c;render();renderFilters();};
        filters.appendChild(b);
      });
    }

    function render(){
      const q=state.q.trim().toLowerCase();
      const filtered=state.items.filter(it=>{
        if(state.category!=='å…¨éƒ¨' && (it.category||'æœªåˆ†ç±»')!==state.category) return false;
        if(!q) return true;
        const hay=[it.title||'',it.summary||'',it.category||'',...(it.tags||[])].join(' ').toLowerCase();
        return hay.includes(q);
      });
      list.innerHTML='';
      filtered.forEach(it=>{
        const href='./reader.html?file='+encodeURIComponent(it.file)+'&v=20260223i';
        const qv=it.quality||'A';
        const el=document.createElement('article');
        el.className='card';
        el.innerHTML=`
          <a class="cover ${((it.category||'').includes('OpenClaw')?'cat-openclaw':((it.category||'').includes('å·¥å…·')?'cat-tools':((it.category||'').includes('å·¥ä½œæµ')?'cat-workflow':'cat-default')))}" href="${href}">
            <div class="metaTop">
              <span class="chip">${it.category||'æœªåˆ†ç±»'}</span>
              <span class="chip q-${qv}">${qv}</span>
            </div>
          </a>
          <div class="body">
            <a class="tt" href="${href}" title="${it.title}">${it.title}</a>
            <p class="sm">${it.summary||''}</p>
            <div class="m2"><span class="mono">${it.date||''}</span><span>Â·</span><a href="${it.source||'#'}" target="_blank" rel="noopener">â†— åŸå§‹é“¾æ¥</a></div>
            <div class="tags">${(() => { const tags=(it.tags||[]); const head=tags.slice(0,2).map(t=>`<span class="tag">${t}</span>`).join(''); const more=tags.length>2?`<span class="tag">+${tags.length-2}</span>`:''; return head+more; })()}</div>
          </div>`;
        list.appendChild(el);
      });
      countEl.textContent=`${filtered.length} / ${state.items.length}`;
      empty.style.display=filtered.length? 'none':'block';
    }

    qInput.addEventListener('input',e=>{state.q=e.target.value;render();});
    clearBtn.addEventListener('click',()=>{state.q='';state.category='å…¨éƒ¨';qInput.value='';renderFilters();render();});

    fetch('./articles.json').then(r=>r.json()).then(items=>{
      state.items=items.sort((a,b)=>(b.date||'').localeCompare(a.date||''));
      const top=state.items[0];
      if(top){
        const href='./reader.html?file='+encodeURIComponent(top.file)+'&v=20260223i';
        featuredTitle.href=href;
        featuredTitle.textContent=top.title;
        featuredSummary.textContent=top.summary||'';
      }
      recentList.innerHTML = state.items.slice(0,3).map(it=>{
        const href='./reader.html?file='+encodeURIComponent(it.file)+'&v=20260223i';
        return `<div class="miniItem"><a href="${href}">${it.title}</a><div class="miniMeta">${it.date||''} Â· ${it.category||'æœªåˆ†ç±»'}</div></div>`;
      }).join('');
      renderFilters();
      render();
    }).catch(()=>{countEl.textContent='åŠ è½½å¤±è´¥';list.innerHTML='';});
  </script>
</body>
</html>
