<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>文章阅读 - Halo Notes</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    :root{--bg:#f7f8fb;--card:#fff;--text:#111;--sub:#666;--line:#e8e8ef;--pri:#0b57d0}
    @media (prefers-color-scheme: dark){:root{--bg:#0f1115;--card:#151922;--text:#e8ecf1;--sub:#a6b0bd;--line:#2a3040;--pri:#7fb0ff}}
    body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft Yahei",sans-serif}
    .wrap{max-width:920px;margin:0 auto;padding:24px 16px 60px}
    .top{margin-bottom:14px}
    a{color:var(--pri);text-decoration:none}
    .paper{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:20px}
    .content h1,.content h2,.content h3{line-height:1.35}
    .content p,.content li{line-height:1.8}
    .content pre{overflow:auto;background:#0b1020;color:#d7e1ff;padding:12px;border-radius:8px}
    .content blockquote{border-left:3px solid var(--line);padding-left:12px;color:var(--sub);margin-left:0}
  </style>
</head>
<body>
  <main class="wrap">
    <div class="top"><a href="./index.html">← 返回目录</a></div>
    <article class="paper content" id="content">加载中…</article>
  </main>
  <script>
    const p = new URLSearchParams(location.search);
    const file = p.get('file');
    const el = document.getElementById('content');
    if(!file){ el.textContent='缺少 file 参数'; }
    else {
      fetch('./articles/'+file).then(r=>{ if(!r.ok) throw new Error('读取失败'); return r.text(); })
      .then(md=>{ el.innerHTML = marked.parse(md); document.title = (md.match(/^#\s+(.+)/m)?.[1]||'文章阅读') + ' - Halo Notes'; })
      .catch(e=>{ el.textContent='加载失败：'+e.message; });
    }
  </script>
</body>
</html>
