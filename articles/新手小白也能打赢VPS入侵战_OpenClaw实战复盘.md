# 我只是想试试 OpenClaw 管 VPS，结果顺手抓到一场挖矿入侵

- 原始链接：<内部复盘改写>
- 作者：oGL2046
- 发布时间：2026-02-28
- X Article：<无>

---

说来你可能不信。

我那天只是想做一件很普通的事：

> 试试用 OpenClaw 接管我的 VPS 日常运维。

结果第一轮检查就发现不对劲：

- 机器卡得离谱
- 负载冲到 10+
- CPU 基本打满
- 内存快吃光

本来以为是我部署姿势不对，最后才发现——**被人塞了挖矿木马，已经跑了接近 3 个月**。

这篇不写成“安全白皮书”，就写给和我一样的新手：
**无意间发现问题后，怎么在 OpenClaw 的辅助下，把这台机子从濒死状态救回来。**

## 1）一开始我也走了弯路

新手第一反应通常是：

- 杀进程
- 重启服务
- 祈祷恢复

我也这么干了，结果很快发现：杀掉又复活。

OpenClaw 帮我定位到容器里的保活脚本：

```bash
while true; do
  /var/tmp/kworker_ds -c /var/tmp/.kworker.conf
  sleep 10
done
```

到这一步我才明白：

- “高负载”只是表象
- “保活脚本+恶意二进制”才是根因

## 2）真正让我冷静下来的，是证据链

OpenClaw 没让我“拍脑袋处理”，而是带我按证据往下走。

### 第一步：看进程

```bash
docker exec docker-web-1 ps aux
```

可疑名字非常明显：`kworker_ds`、`kirkd`、`x64`。

### 第二步：看落地文件

```bash
docker exec docker-web-1 ls -la /var/tmp/
```

抓到两个关键物：

- 伪装系统进程名的二进制 `kworker_ds`
- 挖矿配置 `.kworker.conf`

### 第三步：回看入口（最关键）

Nginx 日志里出现：

```text
GET /.env 200
GET /.git/config 200
```

看到 `200` 我脑子嗡一下。

这基本就说明：

- `.env` 和 `.git` 暴露了
- 敏感配置可能被拿走
- 入侵不是偶发，是有路径可走

## 3）我是怎么处理的（新手可抄作业版）

OpenClaw 给我的执行顺序非常稳：

1. 先止血（隔离受感染容器）
2. 再清理（重建，不和木马硬扛）
3. 再复核（恶意进程清零）
4. 再加固（把入口全部关上）

### 我实际执行的核心动作

```bash
docker stop docker-web-1
docker rm docker-web-1
docker compose up -d
```

然后补 5 个加固点：

- SSH 改密钥登录，禁用密码
- Nginx 禁止访问 `.env` 与 `.git`
- 容器加内存限制（防止再次拖死主机）
- 系统补丁更新并重启
- 清理废弃镜像与异常日志

## 4）结果有多直接？

处理前后非常明显：

- 负载：10+ → <1
- 内存：接近打满 → 回到正常区间
- 恶意进程：持续复活 → 0
- 业务：卡顿不可用 → 恢复正常

这是我第一次真切体会到：

> 新手并不是不能处理安全事件，关键是有没有一个“不会乱”的流程。

## 5）给推友的最小避坑清单（建议收藏）

### 1. 永远不要让 `.env` 和 `.git` 暴露在 Web 下

```nginx
location ~ /\.env$ { deny all; }
location ~ /\.git/ { deny all; }
```

### 2. SSH 密码登录尽快下线

上密钥，关密码，攻击面立刻缩一半。

### 3. 容器必须设资源上限

别让单个异常容器拖垮整台机。

### 4. 负载异常先按“被入侵”排查

先排安全，再排性能调优。

### 5. 写复盘文档

没有复盘，就一定会踩第二次。

## 6）这次我最大的收获

我原本只是“无意间试用 OpenClaw 管 VPS”，没想到它在事故场景下更有价值：

- 帮我把慌乱变成步骤
- 帮我把猜测变成证据
- 帮我把处理变成可复用 SOP

它不是替你按下所有命令的“魔法按钮”，
而是让一个新手在关键时刻，**做对大部分正确决策**。

如果你也在跑 VPS，这篇就是一句话：

**今天就去检查 `.env` 暴露、SSH 登录方式、容器资源限制。**

你会感谢现在这个动作。

---

**#OpenClaw #VPS安全 #Docker运维 #挖矿木马 #新手运维 #事件响应**
